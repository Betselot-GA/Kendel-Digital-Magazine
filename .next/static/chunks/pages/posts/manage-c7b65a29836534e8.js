(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[767],{2850:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/manage",function(){return e(4119)}])},1511:function(n,t,e){"use strict";var r=e(5893),s=e(1664),i=(e(7294),e(2980)),c=e(9799);t.Z=function(n){return(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)("section",{className:"breadcrumbs",children:(0,r.jsx)("div",{className:"container",children:n.pageTitle&&(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,r.jsx)("h2",{children:n.pageTitle}),(0,r.jsxs)("ol",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(s.default,{href:"/",children:"Home"})}),(0,r.jsx)("li",{children:n.pageTitle})]})]})})}),(0,r.jsx)("section",{className:"inner-page",children:(0,r.jsx)("div",{className:"container",children:n.children})}),(0,r.jsx)(i.Z,{})]})}},4206:function(n,t,e){"use strict";e.d(t,{T6:function(){return f},HQ:function(){return h},qb:function(){return m},is:function(){return y},DJ:function(){return b},o1:function(){return g}});var r=e(4051),s=e.n(r);function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function c(n,t,e,r,s,i,c){try{var a=n[i](c),o=a.value}catch(u){return void e(u)}a.done?t(o):Promise.resolve(o).then(r,s)}function a(n){return function(){var t=this,e=arguments;return new Promise((function(r,s){var i=n.apply(t,e);function a(n){c(i,r,s,a,o,"next",n)}function o(n){c(i,r,s,a,o,"throw",n)}a(void 0)}))}}function o(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,s,i=[],c=!0,a=!1;try{for(e=e.call(n);!(c=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(o){a=!0,s=o}finally{try{c||null==e.return||e.return()}finally{if(a)throw s}}return i}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return i(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u="http://localhost:3000/api/";function l(){return p.apply(this,arguments)}function p(){return p=a(s().mark((function n(){var t,e,r,i=arguments;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",e=i.length>1&&void 0!==i[1]?i[1]:{},n.next=3,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)});case 3:return r=n.sent,n.abrupt("return",r.json());case 5:case"end":return n.stop()}}),n)}))),p.apply(this,arguments)}function f(){return d.apply(this,arguments)}function d(){return(d=a(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(u+"posts").then((function(n){return n.json()}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return x.apply(this,arguments)}function x(){return(x=a(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(u+"posts/approved").then((function(n){return n.json()}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(n){return v.apply(this,arguments)}function v(){return(v=a(s().mark((function n(t){var e;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(u+"posts",{method:"POST",body:t});case 2:return e=n.sent,n.abrupt("return",e.json());case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(n){return j.apply(this,arguments)}function j(){return(j=a(s().mark((function n(t){var e,r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.queryKey,r=o(e,2),r[0],i=r[1],n.next=4,fetch(u+"posts/"+i).then((function(n){return n.json()}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(n){return w.apply(this,arguments)}function w(){return(w=a(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(u+"posts/"+t.id,t).then((function(n){return n}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(n){return N.apply(this,arguments)}function N(){return(N=a(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(n){n.json()}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},4119:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return o}});var r=e(5893),s=e(1664),i=e(8767),c=e(1511),a=e(4206);function o(){var n=(0,i.useQueryClient)(),t=(0,i.useQuery)("posts",a.T6),e=t.isLoading,o=t.isError,u=t.data,l=t.error,p=(0,i.useMutation)(a.DJ,{onSuccess:function(){n.invalidateQueries("posts")}});return(0,r.jsxs)(c.Z,{pageTitle:"Manage Posts",children:[(0,r.jsx)(s.default,{href:"/posts/create",children:(0,r.jsx)("button",{className:"btn btn-warning my-4",children:"Create Post"})}),e&&(0,r.jsx)("div",{className:"col-md-12 alert alert-warning",children:"Loading posts please wait..."}),o&&(0,r.jsxs)("div",{className:"col-md-12 alert alert-warning",children:["Opps error occured please refresh the page:  ",l]}),(0,r.jsxs)("table",{className:"table table-bordered text-white",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Manage"})]})}),u&&(0,r.jsx)("tbody",{children:u.map((function(n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Hello, world"}),(0,r.jsxs)("td",{children:[(0,r.jsx)(s.default,{href:"/posts/"+n.id,children:(0,r.jsx)("button",{className:"btn btn-warning btn-sm mx-1",children:"View"})}),n.published?(0,r.jsx)("button",{className:"btn btn-success btn-sm mx-1",children:"Approved"}):(0,r.jsx)("button",{className:"btn btn-warning btn-sm mx-1",onClick:function(){return t=n.id,void p.mutate({id:t});var t},children:"Approve"})]})]})}))})]}),(0,r.jsx)("div",{className:"text-info pt-3",children:(0,r.jsxs)("small",{children:[p.isLoading&&"Approving please wait...",p.isError&&"Error occured: ".concat(p.error)]})}),(0,r.jsx)("div",{className:"text-success pt-3",children:(0,r.jsx)("small",{children:p.isSuccess&&"Post Approved"})})]})}}},function(n){n.O(0,[61,49,774,888,179],(function(){return t=2850,n(n.s=t);var t}));var t=n.O();_N_E=t}]);